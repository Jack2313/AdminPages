<!DOCTYPE html>
<html>
    <head><title>WeChatterBot后端管理平台</title>
        <meta charset="utf-8"> 
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script src="js/jquery.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/jquery-form.js"></script>
        <link href="css/dataTables.bootstrap.css" rel="stylesheet">

        <!-- DataTables Responsive CSS -->
        <link href="css/dataTables.responsive.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="css/sb-admin-2.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="css/font-awesome.css" rel="stylesheet" type="text/css">
        <script src="js/sb-admin-2.js"></script>

        <script src="js/jquery.dataTables.min.js"></script>
        <script src="js/dataTables.bootstrap.min.js"></script>
        <script src="js/dataTables.responsive.js"></script>
        <script type="text/javascript" src="js/dataTables.buttons.min.js"></script>
        <script type="text/javascript" src="js/dataTables.select.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.2.1/js/buttons.print.min.js"></script>
    </head>
    <body onload="onload()">

        <div>
            <nav class="navbar navbar-inverse" role="navigation">
                <div class="container-fluid">
                    <div class="navbar-header" style="margin-left:20%">
                        <a class="navbar-brand" href="#">WeChatterBot后端管理平台</a>
                    </div>
                    <div style="margin-right:10%">
                        <ul class="nav navbar-nav navbar-left">  
                            <li class="active"><a href="admin_login.html">管理员登录界面</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div id="wrapper">

        <!-- Navigation -->
        

        <div id="page-wrapper">
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-8">
                    <h3 class="page-header">您的管理员编号是<label id="admin_ID"></label>
                    </h3>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                    <h3 class="page-header">您的管理员名称是<label id="admin_name"></label>
                    </h3>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">对话查询</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>

            <div class="container">
			    <form action="" class="form-horizontal"  role="form">
			        <fieldset>
			         	<div class="form-group">
			         		<label class="col-md-1 control-label">对话id</label>
			         		<div class="col-md-2">
                            <input class="form-control required" type="number" placeholder="选填" id="search_state_id" name="input_state_id" autofocus maxlength="20"/>
                        	</div>
                        </div>
                        <div class="form-group">
			         		<label class="col-md-1 control-label">对话内容</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="选填" id="search_state_text" name="input_state_text"/>
                        	</div>
                        </div>
                        <div class="form-group col-md-2"></div>
                        <div class="form-group col-md-1">
                        	<button id='btn1' type="submit" class="btn btn-success" name="submit" onclick="search_statement()">查询</button>

                    	</div>
                    	<div class="form-group col-md-1">
                    		<button id='btn2' type="button" class="btn btn-danger" onclick="delete_statement()">删除所有查询到的对话</button>
                    	</div>

			        </fieldset>
			    </form>
			</div>

			<div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            对话列表
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-statement">
                                <thead>
                                    <tr>
                                        <th>id</th>
                                        <th>text</th>
                                        <th>in response to</th>
                                        <th>tag</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    
                                </tbody>
                            </table>
                            <!-- /.table-responsive -->
                            
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">对话添加、更新</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>

            <div class="container">
			    <form action="" class="form-horizontal"  role="form">
			        <fieldset>
			         	<div class="form-group">
			         		<label class="col-md-1 control-label">对话id</label>
			         		<div class="col-md-2">
                            <input class="form-control required" type="number" placeholder="只在更新对话时填" id="input_state_id" name="input_state_id" autofocus maxlength="20"/>
                        	</div>
                        </div>
                        <div class="form-group">
			         		<label class="col-md-1 control-label">对话内容</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="对话内容" id="input_state_text" name="input_state_text"/>
                        	</div>
                        </div>

                        <div class="form-group">
			         		<label class="col-md-1 control-label">response to</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="对话内容" id="input_state_response" name="input_state_text"/>
                        	</div>
                        </div>

                        <div class="form-group col-md-2"></div>
                        <div class="form-group col-md-1">
                        	<button id='btn3' type="submit" class="btn btn-success" name="submit" onclick="add_statement()">添加</button>
                    	</div>
                    	<div class="form-group col-md-1">
                        	<button id='btn4' type="submit" class="btn btn-success" name="submit" onclick="update_statement()">更新</button>
                    	</div>
                    	<div class="form-group col-md-1">
                    		<button id='btn5' type="button" class="btn btn-danger" onclick="delete_input_statement()">清空当前对话</button>
                    	</div>

			        </fieldset>
			    </form>
			</div>


            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">对话规则查询</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>

            <div class="container">
			    <form action="" class="form-horizontal"  role="form">
			        <fieldset>
			         	<div class="form-group">
			         		<label class="col-md-1 control-label">规则id</label>
			         		<div class="col-md-2">
                            <input class="form-control required" type="number" placeholder="选填" id="search_rule_id" name="input_rule_id" autofocus maxlength="20"/>
                        	</div>
                        </div>
                        <div class="form-group">
			         		<label class="col-md-1 control-label">输入文本</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="选填" id="search_rule_text" name="input_rule_text"/>
                        	</div>
                        </div>
                        <div class="form-group col-md-2"></div>
                        <div class="form-group col-md-1">
                        	<button id='btn6' type="submit" class="btn btn-success" name="submit" onclick="search_rule()">查询</button>

                    	</div>
                    	<div class="form-group col-md-1">
                    		<button id='btn7' type="button" class="btn btn-danger" onclick="delete_rule()">删除所有查询到的规则</button>
                    	</div>

			        </fieldset>
			    </form>
			</div>

            <div class="row">
                <div class="col-lg-8">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            对话规则列表
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-rule">
                                <thead>
                                    <tr>
                                        <th>用户id</th>
                                        <th>用户名</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    
                                </tbody>
                            </table>
                            <!-- /.table-responsive -->
                            
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">对话规则添加、更新</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>

            <div class="container">
			    <form action="" class="form-horizontal"  role="form">
			        <fieldset>
			         	<div class="form-group">
			         		<label class="col-md-1 control-label">规则id</label>
			         		<div class="col-md-2">
                            <input class="form-control required" type="number" placeholder="只在更新规则时填" id="input_rule_id" name="input_rule_id" autofocus maxlength="20"/>
                        	</div>
                        </div>
                        <div class="form-group">
			         		<label class="col-md-1 control-label">对话内容</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="对话内容" id="input_rule_text" name="input_rule_text"/>
                        	</div>
                        </div>

                        <div class="form-group">
			         		<label class="col-md-1 control-label">response to</label>
			         		<div class="col-md-5">
                            <input class="form-control required" type="text" placeholder="对话内容" id="input_rule_response" name="input_rule_response"/>
                        	</div>
                        </div>

                        <div class="form-group col-md-2"></div>
                        <div class="form-group col-md-1">
                        	<button id='btn6' type="submit" class="btn btn-success" name="submit" onclick="add_rule()">添加</button>
                    	</div>
                    	<div class="form-group col-md-1">
                        	<button id='btn7' type="submit" class="btn btn-success" name="submit" onclick="update_rule()">更新</button>
                    	</div>
                    	<div class="form-group col-md-1">
                    		<button id='btn8' type="button" class="btn btn-danger" onclick="delete_input_rule()">清空当前规则</button>
                    	</div>

			        </fieldset>
			    </form>
			</div>

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->



    </body>
        <script>
        var url="http://localhost:8083/";
        window.onload=function(){
            var table1=$('#dataTables-statement').DataTable({
                searching: false,
                dom: 'Bfrtip',
                select: true,
                pageLength: 10,
                pagingType: 'simple'
            });

            var table2=$('#dataTables-rule').DataTable({
                searching: false,
                dom: 'Bfrtip',
                select: true,
                pageLength: 10,
                pagingType: 'simple'
            });
            $("#dataTables-statement").DataTable().on("select", function () {

                var s=table1.row({ selected: true }).data();
                returnValue = confirm("确认删除这条对话吗？");
                if(returnValue==true){
                    confirm_url=url+"admin/verifyUser?userId="+s[0];
                    $.get(confirm_url);
                    alert("授权成功！");
                    window.location.href="admin.html";
                }
            } );

            $("#dataTables-statement").DataTable().on("select", function () {

                var s=table2.row({ selected: true }).data();
                returnValue = confirm("确认删除这条规则吗？");
                if(returnValue==true){
                    confirm_url=url+"admin/verifyUser?userId="+s[0];
                    $.get(confirm_url);
                    alert("授权成功！");
                    window.location.href="admin.html";
                }
            } );
            uname1();
            //getAllVertifyUsers();
        }

        function uname1()
        {
            var b=checkName();
            if(b=="游客"){
                //window.location.href="admin_login.html";
                //alert("请先登录！");
            }
            $("#admin_name").append(b);
            var a=checkID();
            $("#admin_ID").append(a);
        }

        function getAllVertifyUsers(){
            thisurl=url+"admin/getAllVerifyUser";
            
            $.get(thisurl,function(data){
                //alert(data);
                var table = $('#dataTables-user').DataTable();
                if(data==""){
                    table.row.add(["null","null","null","null","null"]).draw();
                }
                else{
                    for(var i=0;i<data.length;i++){
                        var id=data[i].userId;
                        var dn=data[i].userName;

                        if(!id)dn="未填写";
                        if(!dn)df="未填写";
                        table.row.add([id,dn]).draw();
                    }
                }
            });
        }

        function search_statement(){

        }

        function delete_statement(){

        }

        function add_statement(){

        }

        function update_statement(){

        }

        function delete_input_statement(){

        }

        function search_rule(){

        }

        function delete_rule(){

        }

        function add_rule(){

        }

        function update_rule(){

        }

        function delete_input_rule(){

        }


        function getCookie(c_name)
        /***/{
        /***/    //alert(c_name);
        /***/    //alert(document.cookie);
        /***/    let c_end;
        /***/   if(document.cookie.length>0){
        /***/       c_start=document.cookie.indexOf(c_name+"=");
        /***/       if(c_start!=-1){
        /***/           c_start=c_start+c_name.length+1;
        /***/           c_end=document.cookie.indexOf(";",c_start);
        /***/           if(c_end==-1){
        /***/               c_end=document.cookie.length;
        /***/           }
        /***/       }
        /***/        return unescape(document.cookie.substring(c_start,c_end));
        /***/   }
        /***/   return "";
        /***/}
        /***/function setCookie(cname, cvalue, exdays)
        /***/{
        /***/    var d = new Date();
        /***/    d.setTime(d.getTime() + (exdays*24*60*60*1000));
        /***/    var expires = "expires="+d.toUTCString();
        /***/    document.cookie = cname + "=" + cvalue + "; " + expires;
        /***/}        
        /***/function logout() 
        /***/{
        /***/    setCookie("userId", "", -1);
        /***/    setCookie("type","",-1)
        /***/    location.reload();
        /***/}
        /***/function checkName()
        /***/{
        /***/    var adminID = getCookie("adminName");
        /***/    //alert("userid"+userid+"  type"+type);
        /***/   if(adminID=="")
        /***/   {
        /***/        var b="游客";
        /***/       return b;
        /***/   }
        /***/   else if(adminID!="")
        /***/   {
        /***/        return 'admin';                
        /***/   }
        /***/}
        /***/function checkID()
        /***/{
        /***/    var adminID = getCookie("adminID");
        /***/    //alert("userid"+userid+"  type"+type);
        /***/   if(adminID=="")
        /***/   {
        /***/        var b="";
        /***/       return b;
        /***/   }
        /***/   else if(adminID!="")
        /***/   {
        /***/        return adminID;                
        /***/   }
            }
        
        </script>
        
</html>

        
